<!DOCTYPE html>

{% extends "base.html"%}
{% load static %}



{% block body_block %}
    <div class="container">
        <div class="jumbotron shadow">
            <h2>Flash Cycle Inputs</h2>
            <form method="post">
                {% csrf_token %}
                {{ form.as_p }}<!-- The form here comes from the overview view for the flash plot. DOnt be confused-->
                <button type="submit">Run Simulation</button>
            </form>




            <h3>Temperature vs. Entropy (T–s)</h3>
            <div id="tsPlot" style="width:600px; height:600px;"></div>

                <!-- Plotly CDN -->


                <script>
                  const Temperatures = {{ Temperatures|safe }};
                  const Entropies = {{ Entropies|safe }};
                  const Sliq = {{ Sliq | safe }}
                  const Svap = {{ Svap | safe }}
                  const range = {{ range | safe }}
                  const labels = ['1', '2', '4', '5', '5s', '6'];

                  const tsData = [
                    {
                      x: Entropies,
                      y: Temperatures,
                      mode: 'lines+markers+text',
                      name: 'Cycle',
                      marker: { color: 'green' },
                      text: labels,
                      textposition: 'bottom right'
                    },
                    {
                      x: Sliq,
                      y: range,
                      mode: 'lines',
                      name: 'Saturated Liquid',
                      line: { color: 'blue', dash: 'dot' }
                    },
                    {
                      x: Svap,
                      y:  range,
                      mode: 'lines',
                      name: 'Saturated Vapor',
                      line: { color: 'red', dash: 'dot' }
                    }
                  ];

                  Plotly.newPlot('tsPlot', tsData, {
                    title: 'T–s Diagram of Flash Cycle (Best Case)',
                    xaxis: { title: 'Entropy (kJ/kg·K)' },
                    yaxis: { title: 'Temperature (K)' },
                    legend: { x: 1, y: 1 }
                  })

                </script>

            </div>


        </div>
    </div>
{% endblock %}